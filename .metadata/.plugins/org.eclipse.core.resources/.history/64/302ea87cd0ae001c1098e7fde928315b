import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JTextArea;
import javax.swing.border.Border;


public class Database_combined_GUI extends JFrame implements ActionListener {
	static JFrame f,f1,f2,f3,f4;
	static JMenuBar mb;
	static JMenu Db;
	static JMenuItem insert,update,delete,display,exit;
    static String sid,suser,spass;
    static JTextArea t1,t2,t3,t4,t5,t6,t7,t8;
    static JLabel l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15;
    static JButton b1,b2,b3,b4,b5;
	static void insert(String zid,String zuser,String zpass){
		//String zid,String zuser,String zpass
		try
		{
			DAO db=new DAO();
			Connection conn=db.getConnection();
	
			 int id=Integer.parseInt(zid);
			 String user=zuser;
			 String pass=zpass;
			 
			 String insertQuery="insert into registration values(?,?,?)";
			 PreparedStatement preparedStatement;
			 
			 preparedStatement=conn.prepareStatement(insertQuery);
			 preparedStatement.setString(1,id+"");
			 preparedStatement.setString(2,user);
			 preparedStatement.setString(3,pass);
			 
			 preparedStatement.executeUpdate();
			 System.out.println("Data Succesfully Inserted");
			 
			 l5.setForeground(Color.green);
			 l5.setText("Data Entered Succesfully ");
			 
			 
			 
		}
		catch(Exception e){
			 System.out.println(e);
			 l5.setForeground(Color.red);
			 l5.setText("Exception Occur_Cant submit the data!!");
			
		}
		}
		static void update(String pid,String puser,String ppass){
			try{
				DAO db=new DAO();
				Connection conn=db.getConnection();
				
				int id=Integer.parseInt(pid);
				 String user=puser;
				 String pass=ppass;
				 
				 
				 String selectQuery="update registration set user=?,pass=? where id=?";
				 PreparedStatement preparedStatement=null;
				 
				 preparedStatement=conn.prepareStatement(selectQuery);
				 preparedStatement.setString(1,user);
				 preparedStatement.setString(2,pass);
				 preparedStatement.setString(3,id+"");
				 
				 int count=preparedStatement.executeUpdate();
				 if(count==0){
					 System.out.println("No Record Found ");
				 }
				 else{
				 System.out.println("Data Succesfully Updated");
				 }
			}
			catch(Exception e){
				System.out.println(e);
			}
		}
		static void delete(String p){
			try{
				DAO db=new DAO();
				Connection conn=db.getConnection();
		
				int id=Integer.parseInt(p);
				
				String deleteQuery="delete from registration where id=?";
				PreparedStatement preparedStatement;
				
				preparedStatement=conn.prepareStatement(deleteQuery);
				preparedStatement.setString(1, id+"");
				
				int count=preparedStatement.executeUpdate();
				
				if(count==0)
					System.out.println("No record Found With ID ");
				else
					System.out.println("Total "+count+"Record Deleted!!");
				
				
			}
			catch(Exception e){
				System.out.println(e);		
				}
		}
		static String display(){
			try{
				DAO db=new DAO();
				Connection conn=db.getConnection();
			
				String selectQuery="select * from registration";
				PreparedStatement preparedStatement;
				
				preparedStatement=conn.prepareStatement(selectQuery);
				ResultSet result=preparedStatement.executeQuery();
				
				String string_data="";
				while(result.next()){
					string_data=string_data+"Id "+result.getString(1)+"Name "+result.getString(2)+"Password "+result.getString(3)+"\n";
				}
				return string_data;
				}
				catch(Exception e){
					return e+"";
				}
		}
	Database_combined_GUI(){
		f=new JFrame();
		f.setLayout(null);
		f.setVisible(true);
		//f.setVisible(false);
		f.setBounds(400, 200, 800, 500);
		
		mb=new JMenuBar();
		mb.setBounds(0,0,800,40);
		f.add(mb);
		
		Db=new JMenu("Database Operations ");
		mb.add(Db);
		
		insert=new JMenuItem("Insert");
		insert.addActionListener(this);
		Db.add(insert);
		
		update=new JMenuItem("Update");
		update.addActionListener(this);
		Db.add(update);
		
		delete=new JMenuItem("Delete");
		delete.addActionListener(this);
		Db.add(delete);
		
		display=new JMenuItem("Display");
		display.addActionListener(this);
		Db.add(display);
		
		exit=new JMenuItem("Exit");
		exit.addActionListener(this);
		Db.add(exit);
		
		/*----------------------------------*/
		
		//String zid,String zuser,String zpass
				f1=new JFrame();
				f1.setLayout(null);
				f1.setVisible(false);
				//f1.setVisible(true);
				f1.setBounds(400, 200, 800, 500);
				
				l1=new JLabel("Insert Into Database");
				l1.setFont(l1.getFont().deriveFont(20.85632412f));
				l1.setBounds(220, 50, 300, 20);
				f1.add(l1);
				
				l2=new JLabel("Enter the USER ID");
				l2.setBounds(150, 150, 150, 20);
				f1.add(l2);
				
				l3=new JLabel("Enter the User Name ");
				l3.setBounds(150, 200, 150, 20);
				f1.add(l3);
				
				l4=new JLabel("Enter the Password ");
				l4.setBounds(150, 250, 150, 20);
				f1.add(l4);
				
				l5=new JLabel();
				l5.setBounds(260, 350, 250, 20);
				f1.add(l5);
				
				Border border = BorderFactory.createLineBorder(Color.gray, 2);
				t1=new JTextArea();
				t1.setBounds(360,150,100,20);
				t1.setVisible(true);
				t1.setBorder(border);
				f1.add(t1);
				
				t2=new JTextArea();
				t2.setBounds(360,200,150,20);
				t2.setVisible(true);
				t2.setBorder(border);
				f1.add(t2);
				
				t3=new JTextArea();
				t3.setBounds(360,250,150,20);
				t3.setVisible(true);
				t3.setBorder(border);
				f1.add(t3);
				
				b1=new JButton("Submit ");
				b1.setBounds(260,300,100,20);
				b1.enable();
				b1.addActionListener(this);
				b1.setVisible(true);
				f1.add(b1);
				
				/*-----------------------------------*/
		
		
	}
	public void actionPerformed(ActionEvent e) {
		Object z=e.getSource();
		if(z==insert){
			f1.setVisible(true);	
		}
		if(z==b1){
			System.out.println(t1.getText());
			String s1=t1.getText();
			String s2=t2.getText();
			String s3=t3.getText();
			
			insert(s1,s2,s3);
		}
        if(z==update){
			
		}
        if(z==delete){
			
		}
        if(z==display){
			
		}
        if(z==exit){
			f.dispose();
		}
		
	}

	public static void main(String[] args) {
		/*DAO db=new DAO();
		Connection conn=db.getConnection();*/
		//insert("12","Sangram","pass");
		new Database_combined_GUI();
	}
}
